<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wxyz Capstone Title & Idea Generator</title>
  <meta name="description" content="Generate unique Capstone project titles and ideas. Save, search, and share your favorites." />
  <link rel="icon" type="image/png" href="logo.png" />

  <!-- ====== Styles (No frameworks) ====== -->
  <style>
    :root{
      --bg: #0f1220;
      --card: #171a2b;
      --muted: #9aa3b2;
      --text: #eef2ff;
      --accent: #7c5cff;
      --accent-2: #4cc9f0;
      --border: #262a40;
      --success: #2dd4bf;
      --warning: #f59e0b;
      --danger: #ef4444;
      --shadow: 0 10px 25px rgba(0,0,0,.35), 0 2px 6px rgba(0,0,0,.2);
      --radius-xl: 20px;
      --radius-lg: 14px;
      --radius-md: 10px;
      --radius-sm: 8px;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg: #f7f8fb;
        --card: #ffffff;
        --muted: #5b6472;
        --text: #0e1525;
        --accent: #6d42ff;
        --accent-2: #0ea5e9;
        --border: #e8eaf1;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #dc2626;
        --shadow: 0 10px 25px rgba(2, 6, 23, .08), 0 2px 6px rgba(2,6,23,.06);
      }
    }

    *{ box-sizing:border-box }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% 0%, rgba(124,92,255,.15), transparent 40%),
                  radial-gradient(1200px 600px at 80% 10%, rgba(76,201,240,.12), transparent 40%),
                  var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    .container{
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px clamp(16px, 4vw, 28px) 90px;
    }

    header{
      display: grid;
      gap: 10px;
      margin-bottom: 18px;
    }

    .title{
      font-size: clamp(24px, 3.2vw, 38px);
      font-weight: 800;
      letter-spacing: 0.3px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .badge{
      font-size: 12px;
      letter-spacing: .6px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
      border-radius: 999px;
      padding: 6px 10px;
      font-weight: 700;
      box-shadow: var(--shadow);
    }

    .sub{
      color: var(--muted);
      font-size: clamp(14px, 2vw, 16px);
      max-width: 60ch;
    }

    .controls{
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 8px;
    }

    @media (min-width: 720px){
      .controls{
        grid-template-columns: 1.2fr auto auto;
        align-items: center;
      }
    }

    .select, .btn{
      height: 48px;
      padding: 10px 14px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      outline: none;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    }

    .select:hover, .btn:hover{
      border-color: color-mix(in oklab, var(--accent) 45%, var(--border));
      box-shadow: 0 6px 16px rgba(124,92,255,.18);
    }

    .btn{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      font-weight: 700;
      user-select: none;
    }

    .btn.primary{
      background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 75%, #000 10%), var(--accent));
      border-color: color-mix(in oklab, var(--accent) 60%, var(--border));
      color: white;
    }

    .btn.secondary{
      background: var(--card);
    }

    .btn.ghost{
      background: transparent;
      border-color: transparent;
      box-shadow: none;
      height: auto;
      padding: 6px 10px;
      color: var(--muted);
    }

    .btn:active{ transform: translateY(1px) }

    main{
      display: grid;
      grid-template-columns: 1fr;
      gap: 22px;
      margin-top: 18px;
    }

    @media (min-width: 980px){
      main{
        grid-template-columns: 1.05fr .95fr;
        align-items: start;
      }
    }

    .panel{
      background: linear-gradient(180deg, color-mix(in oklab, var(--card) 90%, transparent), var(--card));
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow);
      padding: clamp(16px, 3vw, 22px);
    }

    .panel h2{
      margin: 0 0 6px;
      font-size: 18px;
      letter-spacing: .4px;
    }
    .panel p.helper{ margin: 0 0 14px; color: var(--muted); font-size: 13.5px }

    /* Generated idea card */
    .idea-card{
      border: 1px solid var(--border);
      background: linear-gradient(180deg, color-mix(in oklab, var(--card) 88%, transparent), var(--card));
      border-radius: var(--radius-xl);
      padding: 18px;
      display: grid;
      gap: 10px;
      animation: fadeSlide .35s ease both;
    }
    .idea-title{
      font-size: clamp(18px, 2.6vw, 22px);
      font-weight: 800;
      letter-spacing: .2px;
    }
    .idea-desc{ color: color-mix(in oklab, var(--text) 84%, var(--muted) 16%) }
    .chip{
      display: inline-flex; gap: 8px; align-items: center; font-weight: 700;
      font-size: 12px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); color: var(--muted)
    }

    /* Saved ideas grid */
    .saved-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 640px){
      .saved-grid{ grid-template-columns: 1fr 1fr }
    }
    @media (min-width: 1100px){
      .saved-grid{ grid-template-columns: 1fr }
    }

    .saved-card{
      border: 1px dashed var(--border);
      background: color-mix(in oklab, var(--card) 92%, transparent);
      border-radius: var(--radius-lg);
      padding: 14px;
      display: grid; gap: 10px;
      transition: border-color .2s ease, background .2s ease;
    }
    .saved-card:hover{ border-color: color-mix(in oklab, var(--accent) 45%, var(--border)) }

    .toolbar{
      display: flex; gap: 8px; flex-wrap: wrap;
    }
    .toolbar .btn{ height: 36px; padding: 6px 10px; border-radius: var(--radius-md); font-weight: 700; }

    /* Search input */
    .search{
      width: 100%;
      height: 44px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      padding: 10px 12px;
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease;
    }
    .search:focus{
      border-color: color-mix(in oklab, var(--accent) 55%, var(--border));
      box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 18%, transparent);
    }

    .empty{
      color: var(--muted);
      font-size: 14px;
      border: 1px dashed var(--border);
      border-radius: var(--radius-lg);
      padding: 14px;
      background: color-mix(in oklab, var(--card) 95%, transparent);
    }

    /* Toast */
    .toast{
      position: fixed;
      z-index: 50;
      inset: auto 0 18px 0;
      display: grid;
      place-items: center;
      pointer-events: none;
    }
    .toast > div{
      pointer-events: auto;
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 999px;
      box-shadow: var(--shadow);
      font-weight: 700;
      font-size: 14px;
      animation: pop .18s ease both;
    }

    @keyframes fadeSlide{
      from{ opacity: 0; transform: translateY(6px) }
      to  { opacity: 1; transform: translateY(0) }
    }
    @keyframes pop{
      from{ transform: translateY(6px) scale(.98); opacity: 0 }
      to  { transform: translateY(0)   scale(1);    opacity: 1 }
    }

    footer{
      margin-top: 70px;
      color: var(--muted);
      font-size: 12.5px;
      text-align: center;
    }

    /* Small utility */
    .row{ display: flex; align-items: center; gap: 8px; flex-wrap: wrap }
    .grow{ flex: 1 1 auto }
    .right{ margin-left: auto }
    .sr-only{
      position: absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
      clip:rect(0,0,0,0); white-space:nowrap; border:0;
    }

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="row">
        <span class="badge">WXYZ CAPSTONE LAB</span>
      </div>
      <div class="title">Wxyz Capstone Title & Idea Generator</div>
      <p class="sub">Pick a capstone type, generate a unique project title with a short idea summary, then save or share your favorites. Everything works offline and saves in your browser.</p>

      <!-- Controls -->
      <div class="controls">
        <select id="type" class="select" aria-label="Capstone type">
          <option value="software">Pure Software</option>
          <option value="hardware">Pure Hardware</option>
          <option value="both">Both (Hardware + Software)</option>
        </select>

        <button id="btnGenerate" class="btn primary" aria-label="Generate new idea">
          <!-- lightning icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M13 3L4 14h7l-1 7 9-11h-7l1-7z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
          </svg>
          Generate
        </button>

        <button id="btnAnother" class="btn secondary" aria-label="Generate another idea">
          <!-- shuffle icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M17 3h4v4M3 7h8l2 2M21 17v4h-4M3 17h8l2-2M21 7l-4 4M3 7l4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Generate Another
        </button>
      </div>
    </header>

    <main>
      <!-- Left: Generator panel -->
      <section class="panel" aria-labelledby="gen-head">
        <h2 id="gen-head">Your Generated Idea</h2>
        <p class="helper">A fresh, randomly picked idea based on your selected type. You can copy or save it.</p>

        <div id="ideaSlot" class="idea-card" aria-live="polite" aria-atomic="true" hidden>
          <div class="row">
            <span id="typeChip" class="chip">‚Ä¢</span>
            <span class="right btn ghost" id="timeStamp" aria-live="off" title="Generated time"></span>
          </div>
          <div id="ideaTitle" class="idea-title">‚Äî</div>
          <div id="ideaDesc"  class="idea-desc">‚Äî</div>

          <div class="toolbar">
            <button class="btn secondary" id="btnCopy">
              <!-- copy icon -->
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M9 9h11v11H9zM5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Copy
            </button>

            <button class="btn secondary" id="btnShare">
              <!-- share icon -->
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7M12 3v12M8 7l4-4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Share Idea
            </button>

            <button class="btn" style="background:linear-gradient(180deg, var(--success), color-mix(in oklab, var(--success) 70%, #000 10%)); color:#051b1a; border:1px solid color-mix(in oklab, var(--success) 60%, var(--border));" id="btnSave">
              <!-- bookmark -->
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M6 3h12v18l-6-4-6 4V3z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              </svg>
              Save to My Ideas
            </button>
          </div>
        </div>
      </section>

      <!-- Right: Saved ideas -->
      <aside class="panel" aria-labelledby="saved-head">
        <h2 id="saved-head">Save My Ideas</h2>
        <p class="helper">Your saved titles live in <strong>local storage</strong> (only on this browser). Use search to filter.</p>

        <div class="row" style="gap:10px; margin-bottom:10px">
          <input id="search" class="search" placeholder="Search saved titles or descriptions..." aria-label="Search saved ideas" />
          <button id="btnExport" class="btn secondary" title="Copy all saved ideas to clipboard">Export</button>
          <button id="btnClear"  class="btn secondary" title="Clear all saved ideas">
            <span aria-hidden="true">üóëÔ∏è</span> Clear
          </button>
        </div>

        <div id="savedGrid" class="saved-grid" role="list"></div>
        <div id="emptySaved" class="empty">No saved ideas yet. Generate one and click <em>Save to My Ideas</em>.</div>
      </aside>
    </main>

    <footer>
      Tip: Press <kbd>G</kbd> to generate, <kbd>S</kbd> to save, <kbd>C</kbd> to copy.
    </footer>
  </div>

  <!-- Toast container -->
  <div class="toast" aria-live="polite" aria-atomic="true" id="toast" hidden>
    <div id="toastInner">Copied!</div>
  </div>

  <!-- ====== App Script ====== -->
  <script>
    /* -------------------------------------------
     * 1) Data: project ideas per category
     *    Each item = { title: string, desc: string }
     *    Add/modify freely. No external requests.
     * ------------------------------------------*/
    const ideas = {
      software: [
        { title: "SmartQueue: AI-Powered Appointment Scheduler",
          desc: "A web app that predicts peak times and auto-assigns appointment slots to reduce wait time using time-series forecasting." },
        { title: "SafePass: Multi-Factor Authentication Manager",
          desc: "A cross-platform password vault with passkey support, breach alerts, and family-sharing safes." },
        { title: "CampusLink: Student Services Hub",
          desc: "A modular portal for clearance, counseling, and advisories with role-based access and offline-first PWA support." },
        { title: "AgriSense: Crop Disease Detector",
          desc: "Mobile app using on-device vision to classify early signs of plant diseases and recommend remedies." },
        { title: "WasteWatch: Community Reporting System",
          desc: "Geo-tagged incident reporting with prioritization queues and an admin dashboard for local LGUs." },
        { title: "MediTrack: e-Prescription & Pharmacy Sync",
          desc: "Digitizes prescriptions with QR validation and stock-aware pharmacy reservation." },
        { title: "FloodCast: Micro-Weather Alerting",
          desc: "Hyperlocal rain alerts using radar fusion and citizen reports, with automated barangay notifications." },
        { title: "SkillForge: Micro-Internship Marketplace",
          desc: "Connects students to short gigs; includes escrow, review system, and plagiarism-safe deliverables." },
        { title: "ClassNote+: AI Lecture Summarizer",
          desc: "Transforms long lectures into concise notes and quizzes; integrates with LMS exports." },
        { title: "ShopClean: Fake Review Detector",
          desc: "Browser extension that flags suspicious e-commerce reviews using NLP and reviewer graph patterns." },
        { title: "SwiftAid: Disaster Relief Tracker",
          desc: "Logistics and beneficiary matching platform for transparent relief distribution and audit trails." },
        { title: "EcoRide: Carpool & Carbon Tracker",
          desc: "Ride-sharing for campuses with CO‚ÇÇ saved metrics and smart matching by route and schedule." }
      ],
      hardware: [
        { title: "HiveGuard: IoT Beehive Health Monitor",
          desc: "Low-power sensor node tracks hive temperature, humidity, and acoustics to detect swarming events." },
        { title: "AquaPulse: Smart Fishpond Controller",
          desc: "Solar-powered DO, pH, and temp sensing with automatic aerator relay control and SMS alerts." },
        { title: "SafeStep: Wearable Fall-Detection Band",
          desc: "IMU-based fall detection with LoRa alerting and indoor positioning beacons." },
        { title: "PlantBuddy: Autonomous Drip Irrigation",
          desc: "Soil moisture + weather forecast integration to schedule valves and conserve water." },
        { title: "FoodShield: Cold-Chain Logger",
          desc: "Bluetooth data logger for delivery boxes that logs temp/door events and syncs to mobile." },
        { title: "AirCare: Classroom Air Quality Kit",
          desc: "CO‚ÇÇ/PM2.5/TVOC sensor with LED traffic light and recommended ventilation actions." },
        { title: "PawTrack: GPS Pet Collar",
          desc: "NB-IoT collar with safe-zone geofencing and low-battery home-docking guidance." },
        { title: "FarmGuard: Perimeter Intrusion System",
          desc: "PIR + mmWave fusion with siren and image capture to deter crop theft." },
        { title: "HelioHome: Solar Roof Monitor",
          desc: "Panel string current/voltage balancer and anomaly detection with mobile diagnostics." },
        { title: "MedBin: Smart Medicine Dispenser",
          desc: "Timed compartment release, tamper sensor, and caregiver notifications." },
        { title: "FloodNode: River Level Telemetry",
          desc: "Ultrasonic/pressure depth sensor with LoRaWAN uplink and community siren trigger." },
        { title: "SafeCross: Pedestrian Smart Crossing",
          desc: "Radar-activated LED beacons with remote diagnostics and traffic analytics." }
      ],
      both: [
        { title: "BarnSense: IoT Swine Health Platform",
          desc: "Wearable temp/heart-rate tags and a dashboard for early illness detection and feed optimization." },
        { title: "GrowWise: Hydroponics + App",
          desc: "Nutrient dosing controller with camera-based plant growth analytics and mobile recipes." },
        { title: "TrashTrack: Smart Bin & Analytics",
          desc: "Ultrasonic fill-level sensor + route optimization app for more efficient garbage collection." },
        { title: "SafeRoute: Motorcycle Dashcam + App",
          desc: "ADAS alerts on-device and incident upload to a crowdsourced blackspot map." },
        { title: "ShelterLink: Disaster IoT Network",
          desc: "Pop-up sensor mesh for shelters plus a relief inventory + beneficiary verification app." },
        { title: "ClinicNow: Queue Kiosk + Portal",
          desc: "Ticketing kiosk with vision-based occupancy estimates and patient mobile notifications." },
        { title: "FieldScan: Crop Scout Drone + Portal",
          desc: "Multispectral drone captures with web-based NDVI analysis and prescription maps." },
        { title: "WellWatch: Groundwater Monitor + App",
          desc: "Solar telemetry for wells and a water-use dashboard with anomaly alerts." },
        { title: "CleanAir+: Community AQI Nodes + Map",
          desc: "Low-cost PM sensors sync to a heatmap app with hotspot push notifications." },
        { title: "SafeBus: School Bus Tracker + Tag",
          desc: "RFID student tags and a parent app with live bus ETA and boarding logs." },
        { title: "FridgeCare: Vaccine Cold-Chain + Portal",
          desc: "BLE temp probes with compliance reports and predictive maintenance scoring." },
        { title: "AgriFlow: Irrigation Controller + Planner",
          desc: "Valve nodes plus a scheduling app that uses forecast + soil moisture to plan cycles." }
      ]
    };

    /* -------------------------------------------
     * 2) Utilities
     * ------------------------------------------*/
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => [...root.querySelectorAll(sel)];

    const storageKey = "capstone.saved.v1";

    function nowStamp(){
      const d = new Date();
      return d.toLocaleString([], { hour12: true, year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
    }

    function showToast(msg){
      const toast = $("#toast");
      $("#toastInner").textContent = msg;
      toast.hidden = false;
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toast.hidden = true, 1800);
    }

    function copyToClipboard(text){
      navigator.clipboard?.writeText(text).then(() => {
        showToast("Copied to clipboard");
      }).catch(async () => {
        // Fallback: textarea trick
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        try{ document.execCommand("copy"); showToast("Copied to clipboard"); }
        catch{ showToast("Copy failed"); }
        finally{ ta.remove() }
      });
    }

    function pickRandom(list, lastTitle){
      if (!list.length) return null;
      if (list.length === 1) return list[0];
      let item;
      // avoid immediate repeat by title
      do { item = list[Math.floor(Math.random() * list.length)]; }
      while (item.title === lastTitle);
      return item;
    }

    /* -------------------------------------------
     * 3) DOM Elements
     * ------------------------------------------*/
    const typeSel     = $("#type");
    const btnGen      = $("#btnGenerate");
    const btnAnother  = $("#btnAnother");
    const ideaSlot    = $("#ideaSlot");
    const typeChip    = $("#typeChip");
    const timeStamp   = $("#timeStamp");
    const ideaTitleEl = $("#ideaTitle");
    const ideaDescEl  = $("#ideaDesc");
    const btnCopy     = $("#btnCopy");
    const btnShare    = $("#btnShare");
    const btnSave     = $("#btnSave");

    const searchInput = $("#search");
    const savedGrid   = $("#savedGrid");
    const emptySaved  = $("#emptySaved");
    const btnClear    = $("#btnClear");
    const btnExport   = $("#btnExport");

    let lastGenerated = null; // {title, desc, type}

    /* -------------------------------------------
     * 4) Rendering Functions
     * ------------------------------------------*/
    function renderGenerated(item, type){
      lastGenerated = { ...item, type };
      ideaSlot.hidden = false;
      typeChip.textContent = typeLabel(type);
      timeStamp.textContent = nowStamp();
      ideaTitleEl.textContent = item.title;
      ideaDescEl.textContent  = item.desc;

      // Re-trigger animation
      ideaSlot.style.animation = "none"; // reset
      void ideaSlot.offsetWidth;         // force reflow
      ideaSlot.style.animation = "";     // let CSS run it again
    }

    function typeLabel(v){
      return v === "software" ? "Pure Software"
           : v === "hardware" ? "Pure Hardware"
           : "Hardware + Software";
    }

    function loadSaved(){
      try{
        const raw = localStorage.getItem(storageKey);
        const arr = raw ? JSON.parse(raw) : [];
        if (!Array.isArray(arr)) return [];
        return arr;
      }catch{ return [] }
    }

    function saveAll(list){
      localStorage.setItem(storageKey, JSON.stringify(list));
    }

    function addToSaved(item){
      const list = loadSaved();
      // de-dup by title + type
      const exists = list.some(x => x.title === item.title && x.type === item.type);
      if (!exists){
        list.unshift({ ...item, savedAt: new Date().toISOString() });
        saveAll(list);
        refreshSaved();
        showToast("Saved ‚úì");
      } else {
        showToast("Already in Saved");
      }
    }

    function removeSaved(idx){
      const list = loadSaved();
      list.splice(idx, 1);
      saveAll(list);
      refreshSaved();
    }

    function exportSaved(){
      const list = loadSaved();
      if (!list.length){ showToast("Nothing to export"); return; }
      const text = list.map((x, i) => `${i+1}. ${x.title} [${typeLabel(x.type)}]\n   ${x.desc}`).join("\n\n");
      copyToClipboard(text);
    }

    function refreshSaved(){
      const q = searchInput.value.trim().toLowerCase();
      const list = loadSaved();

      const filtered = q
        ? list.filter(x => (x.title + " " + x.desc).toLowerCase().includes(q))
        : list;

      savedGrid.innerHTML = "";
      if (!filtered.length){
        emptySaved.hidden = false;
        return;
      }
      emptySaved.hidden = true;

      filtered.forEach((item, visualIdx) => {
        const card = document.createElement("div");
        card.className = "saved-card";
        card.setAttribute("role","listitem");
        card.innerHTML = `
          <div class="row">
            <span class="chip">${typeLabel(item.type)}</span>
            <span class="right" style="color:var(--muted); font-size:12px">
              ${new Date(item.savedAt || Date.now()).toLocaleString([], {hour12:true, month:'short', day:'2-digit'})}
            </span>
          </div>
          <div style="font-weight:800; letter-spacing:.2px">${item.title}</div>
          <div style="color:var(--muted)">${item.desc}</div>
          <div class="toolbar">
            <button class="btn secondary" data-act="copy">Copy</button>
            <button class="btn secondary" data-act="share">Share</button>
            <button class="btn" style="background:linear-gradient(180deg, var(--danger), color-mix(in oklab, var(--danger) 70%, #000 10%)); color:#fff; border:1px solid color-mix(in oklab, var(--danger) 65%, var(--border));" data-act="delete">
              Delete
            </button>
          </div>
        `;

        // Wire actions
        card.addEventListener("click", (e)=>{
          const act = e.target.closest("button")?.dataset?.act;
          if (!act) return;
          const fullIndex = list.findIndex(x => x.title === item.title && x.type === item.type && x.savedAt === item.savedAt);
          if (act === "copy"){
            copyToClipboard(`${item.title} ‚Äî ${item.desc} (${typeLabel(item.type)})`);
          } else if (act === "share"){
            const shareText = `${item.title}\n${item.desc}\nType: ${typeLabel(item.type)}`;
            copyToClipboard(shareText);
          } else if (act === "delete"){
            removeSaved(fullIndex);
          }
        });

        savedGrid.appendChild(card);
      });
    }

    /* -------------------------------------------
     * 5) Generation logic
     * ------------------------------------------*/
    function generateIdea(){
      const type = typeSel.value;
      const pool = ideas[type];
      const item = pickRandom(pool, lastGenerated?.title);
      if (!item) return;
      renderGenerated(item, type);
    }

    /* -------------------------------------------
     * 6) Event Listeners
     * ------------------------------------------*/
    btnGen.addEventListener("click", generateIdea);
    btnAnother.addEventListener("click", generateIdea);

    btnCopy.addEventListener("click", () => {
      if (!lastGenerated) return showToast("Generate an idea first");
      copyToClipboard(`${lastGenerated.title} ‚Äî ${lastGenerated.desc} (${typeLabel(lastGenerated.type)})`);
    });

    btnShare.addEventListener("click", () => {
      if (!lastGenerated) return showToast("Generate an idea first");
      const text = `${lastGenerated.title}\n${lastGenerated.desc}\nType: ${typeLabel(lastGenerated.type)}`;
      copyToClipboard(text); // Clipboard-based share for universal compatibility
    });

    btnSave.addEventListener("click", () => {
      if (!lastGenerated) return showToast("Generate an idea first");
      addToSaved(lastGenerated);
    });

    btnClear.addEventListener("click", () => {
      if (!confirm("Delete all saved ideas? This cannot be undone.")) return;
      localStorage.removeItem(storageKey);
      refreshSaved();
      showToast("Cleared");
    });

    btnExport.addEventListener("click", exportSaved);
    searchInput.addEventListener("input", refreshSaved);

    // Keyboard shortcuts
    document.addEventListener("keydown", (e)=>{
      if (["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName)) return;
      if (e.key.toLowerCase() === "g"){ generateIdea(); }
      if (e.key.toLowerCase() === "s"){ if(lastGenerated) addToSaved(lastGenerated); }
      if (e.key.toLowerCase() === "c"){ if(lastGenerated) copyToClipboard(`${lastGenerated.title} ‚Äî ${lastGenerated.desc}`); }
    });

    // Initial render
    refreshSaved();
  </script>
</body>
    <footer>
      <span>Made with ‚ù§Ô∏è By Steven Macapa√±as</span>
    </footer>
</html>
